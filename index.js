"use strict";function e(e){var t=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})),t.default=e,Object.freeze(t)}var t=e(require("react"));function r(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{c(n.next(e))}catch(e){s(e)}}function a(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(i,a)}c((n=n.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const n=(e,t)=>Object.keys(e).length!==Object.keys(t).length||Object.keys(t).some((r=>{let o=e[r],s=t[r];if(o&&s){if("function"==typeof o&&"function"==typeof s)return o.toString()!==s.toString();if("object"==typeof o&&"object"==typeof s)return n(o,s)}return o!==s}));class o extends t.Component{constructor(e){super(e),this.container=t.createRef(),this.firstRender=!0}componentDidMount(){o.seatsioBundles[this.getChartUrl()]&&!this.firstRender||(this.createAndRenderChart(),this.firstRender=!1)}componentDidUpdate(e){n(this.props,e)&&this.chart&&(this.destroyChart(),this.createAndRenderChart())}getChartUrl(){return this.props.chartJsUrl.replace("{region}",this.props.region)}createAndRenderChart(){return r(this,void 0,void 0,(function*(){try{const e=yield this.loadSeatsio(),t=this.extractConfigFromProps();t.container=this.container.current,this.chart=this.createChart(e,t).render(),this.props.onRenderStarted&&this.props.onRenderStarted(this.chart)}catch(e){console.error(e)}}))}extractConfigFromProps(){return function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}(this.props,["chartJsUrl","divId","onRenderStarted","region"])}componentWillUnmount(){this.destroyChart()}destroyChart(){this.chart&&"DESTROYED"!==this.chart.state&&this.chart.destroy()}loadSeatsio(){const e=this.getChartUrl();return o.seatsioBundles[e]||(o.seatsioBundles[e]=new Promise(((t,r)=>{const n=document.head.appendChild(document.createElement("script"));window.seatsio=void 0,n.onload=()=>{t(seatsio)},n.onerror=()=>r(`Could not load ${n.src}`),n.src=e}))),o.seatsioBundles[e]}render(){return t.createElement("div",{ref:this.container,style:{height:"100%",width:"100%"}})}}o.seatsioBundles={},o.defaultProps={chartJsUrl:"https://cdn-{region}.seatsio.net/chart.js"};exports.SeatsioDesigner=class extends o{createChart(e,t){return new e.SeatingChartDesigner(t)}},exports.SeatsioEventManager=class extends o{createChart(e,t){return new e.EventManager(t)}},exports.SeatsioSeatingChart=class extends o{createChart(e,t){return new e.SeatingChart(t)}},exports.isBooth=e=>"Booth"===e.objectType,exports.isGeneralAdmission=e=>"GeneralAdmissionArea"===e.objectType,exports.isSeat=e=>"Seat"===e.objectType,exports.isSection=e=>"section"===e.objectType,exports.isTable=e=>"Table"===e.objectType;
//# sourceMappingURL=index.js.map
