import*as t from"react";function e(t,e,r,n){return new(r||(r=Promise))((function(o,s){function i(t){try{c(n.next(t))}catch(t){s(t)}}function a(t){try{c(n.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,a)}c((n=n.apply(t,e||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const r=(t,e)=>Object.keys(t).length!==Object.keys(e).length||Object.keys(e).some((n=>{let o=t[n],s=e[n];if(o&&s){if("function"==typeof o&&"function"==typeof s)return o.toString()!==s.toString();if("object"==typeof o&&"object"==typeof s)return r(o,s)}return o!==s})),n=t=>"Seat"===t.objectType,o=t=>"Table"===t.objectType,s=t=>"section"===t.objectType,i=t=>"Booth"===t.objectType,a=t=>"GeneralAdmissionArea"===t.objectType;class c extends t.Component{constructor(e){super(e),this.container=t.createRef(),this.firstRender=!0}componentDidMount(){c.seatsioBundles[this.getChartUrl()]&&!this.firstRender||(this.createAndRenderChart(),this.firstRender=!1)}componentDidUpdate(t){r(this.props,t)&&this.chart&&(this.destroyChart(),this.createAndRenderChart())}getChartUrl(){return this.props.chartJsUrl.replace("{region}",this.props.region)}createAndRenderChart(){return e(this,void 0,void 0,(function*(){try{const t=yield this.loadSeatsio(),e=this.extractConfigFromProps();e.container=this.container.current,this.chart=this.createChart(t,e).render(),this.props.onRenderStarted&&this.props.onRenderStarted(this.chart)}catch(t){console.error(t)}}))}extractConfigFromProps(){return function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}(this.props,["chartJsUrl","divId","onRenderStarted","region"])}componentWillUnmount(){this.destroyChart()}destroyChart(){this.chart&&"DESTROYED"!==this.chart.state&&this.chart.destroy()}loadSeatsio(){const t=this.getChartUrl();return c.seatsioBundles[t]||(c.seatsioBundles[t]=new Promise(((e,r)=>{const n=document.head.appendChild(document.createElement("script"));window.seatsio=void 0,n.onload=()=>{e(seatsio)},n.onerror=()=>r(`Could not load ${n.src}`),n.src=t}))),c.seatsioBundles[t]}render(){return t.createElement("div",{ref:this.container,style:{height:"100%",width:"100%"}})}}c.seatsioBundles={},c.defaultProps={chartJsUrl:"https://cdn-{region}.seatsio.net/chart.js"};class h extends c{createChart(t,e){return new t.SeatingChartDesigner(e)}}class d extends c{createChart(t,e){return new t.EventManager(e)}}class p extends c{createChart(t,e){return new t.SeatingChart(e)}}export{h as SeatsioDesigner,d as SeatsioEventManager,p as SeatsioSeatingChart,i as isBooth,a as isGeneralAdmission,n as isSeat,s as isSection,o as isTable};
//# sourceMappingURL=index.es.js.map
